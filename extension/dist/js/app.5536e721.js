(function(t){function e(e){for(var n,s,l=e[0],r=e[1],c=e[2],m=0,p=[];m<l.length;m++)s=l[m],o[s]&&p.push(o[s][0]),o[s]=0;for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n]);u&&u(e);while(p.length)p.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],n=!0,l=1;l<a.length;l++){var r=a[l];0!==o[r]&&(n=!1)}n&&(i.splice(e--,1),t=s(s.s=a[0]))}return t}var n={},o={app:0},i=[];function s(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=n,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(a,n,function(e){return t[e]}.bind(null,n));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],r=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var u=r;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"3dfd":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("v-content",[t.selectComponent?a(t.selectComponent,{tag:"component",on:{login:t.login}}):t._e()],1)],1)},o=[],i=(a("cadf"),a("551c"),a("097d"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{id:"inspire"}},[a("v-content",[a("v-navigation-drawer",{attrs:{"hide-overlay":"",stateless:"",app:"","mt-10":"","mini-variant":t.mini},on:{"update:miniVariant":function(e){t.mini=e}},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[a("v-list",{attrs:{dense:""}},[t.crmAccess?a("v-list-tile",{on:{click:function(e){t.changeComponent("Lead")}}},[a("v-list-tile-action",[a("v-badge",{attrs:{right:"",color:"primary"}},[t.counter.leads>0?a("span",{attrs:{slot:"badge"},slot:"badge"},[t._v("\n                            "+t._s(t.counter.leads)+"\n                          ")]):t._e(),t.counter.leads?a("v-icon",{attrs:{slot:"badge",dark:"",small:""},slot:"badge"}):t._e(),a("v-icon",{attrs:{large:""}},[t._v("accessibility")])],1)],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Лид")])],1)],1):t._e(),t.crmAccess?a("v-list-tile",{on:{click:function(e){t.changeComponent("Contact")}}},[a("v-list-tile-action",[a("v-badge",{attrs:{right:"",color:"primary"}},[t.counter.contacts>0?a("span",{attrs:{slot:"badge"},slot:"badge"},[t._v("\n                            "+t._s(t.counter.contacts)+"\n                          ")]):t._e(),t.counter.contacts>0?a("v-icon",{attrs:{slot:"badge",dark:"",small:""},slot:"badge"}):t._e(),a("v-icon",{attrs:{large:""}},[t._v("account_box")])],1)],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Контакт ")])],1)],1):t._e(),t.crmAccess?a("v-list-tile",{on:{click:function(e){t.changeComponent("Company")}}},[a("v-list-tile-action",[a("v-badge",{attrs:{right:"",color:"primary"}},[t.counter.companies>0?a("span",{attrs:{slot:"badge"},slot:"badge"},[t._v("\n                            "+t._s(t.counter.companies)+"\n                          ")]):t._e(),t.counter.companies>0?a("v-icon",{attrs:{slot:"badge",dark:"",small:""},slot:"badge"}):t._e(),a("v-icon",{attrs:{large:""}},[t._v("supervisor_account")])],1)],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Компания")])],1)],1):t._e(),t.crmAccess?a("v-list-tile",{on:{click:function(e){t.changeComponent("Deal")}}},[a("v-list-tile-action",[a("v-icon",{attrs:{large:""}},[t._v("work")])],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Сделка")])],1)],1):t._e(),t.crmAccess?a("v-list-tile",{on:{click:function(e){t.changeComponent("Quote")}}},[a("v-list-tile-action",[a("v-icon",{attrs:{large:""}},[t._v("contact_mail")])],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Предложение")])],1)],1):t._e(),t.taskAccess?a("v-list-tile",{on:{click:function(e){t.changeComponent("Task")}}},[a("v-list-tile-action",[a("v-icon",{attrs:{large:""}},[t._v("done")])],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Задача")])],1)],1):t._e(),a("v-list-tile",{on:{click:function(e){t.changeComponent("Settings")}}},[a("v-list-tile-action",[a("v-icon",{attrs:{large:""}},[t._v("settings")])],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Настройки")])],1)],1)],1)],1),a("v-toolbar",{attrs:{color:"cyan",dark:"",left:"",fixed:"",app:""}},[a("v-toolbar-side-icon",{on:{click:function(e){e.stopPropagation(),t.mini=!t.mini}}}),a("v-toolbar-title",[t._v("BX24 Gmail")])],1),a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-layout",{attrs:{"justify-center":"","align-center":""}},[a("v-flex",{attrs:{"text-xs-left":""}},["Settings"!==t.selectComponent?a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[a("div",[a("h3",{staticClass:"headline mb-0"},[t._v("Иванов Иван Викторович")]),a("div",[t._v("ivan@ivan.ru")])])])],1):t._e(),t.selectComponent?a(t.selectComponent,{tag:"component"}):t._e()],1)],1)],1)],1),a("v-footer",{attrs:{color:"cyan",app:""}},[a("v-spacer"),a("span",{staticClass:"white--text"},[t._v("© 2017")])],1)],1)}),s=[],l=a("cebc"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{id:"lead"}},[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[!t.newLead&&t.leads.length>0?a("v-select",{attrs:{items:t.leads,"item-text":"FULL_NAME","item-value":"ID",label:"Выберите лида","single-line":""},on:{change:t.getLead},model:{value:t.formData.lead,callback:function(e){t.$set(t.formData,"lead",e)},expression:"formData.lead"}}):t._e(),t.leads.length>0?a("v-switch",{attrs:{label:"Создать новый контакт"},model:{value:t.newLead,callback:function(e){t.newLead=e},expression:"newLead"}}):t._e(),a("v-text-field",{attrs:{rules:t.nameRules,label:"Имя",required:""},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}}),a("v-text-field",{attrs:{rules:t.lastnameRules,label:"Фамилия",required:""},model:{value:t.formData.lastname,callback:function(e){t.$set(t.formData,"lastname",e)},expression:"formData.lastname"}}),a("v-text-field",{attrs:{mask:t.phoneMask,label:"Телефон",required:""},model:{value:t.formData.phone,callback:function(e){t.$set(t.formData,"phone",e)},expression:"formData.phone"}}),a("v-autocomplete",{attrs:{items:t.companies,chips:"",color:"blue-grey lighten-2",label:"Компания","item-text":"TITLE","item-value":"ID"},on:{input:t.setCompany,keyup:t.searchCompanies},scopedSlots:t._u([{key:"selection",fn:function(e){return[a("v-chip",{staticClass:"chip--select-multi",attrs:{selected:e.selected,close:""},on:{input:function(e){t.formData.company=null}}},[t._v("\n                    "+t._s(e.item.TITLE)+"\n                ")])]}},{key:"item",fn:function(e){return["object"!==typeof e.item?[a("v-list-tile-content",{domProps:{textContent:t._s(e.item)}})]:[a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:t._s(e.item.TITLE)}})],1)]]}}]),model:{value:t.formData.company,callback:function(e){t.$set(t.formData,"company",e)},expression:"formData.company"}}),a("v-autocomplete",{attrs:{items:t.contacts,chips:"",color:"blue-grey lighten-2",label:"Контакт","item-text":"FULL_NAME","item-value":"ID"},on:{input:t.setContact,keyup:t.searchContact},scopedSlots:t._u([{key:"selection",fn:function(e){return[a("v-chip",{staticClass:"chip--select-multi",attrs:{selected:e.selected,close:""},on:{input:function(e){t.formData.contact=null}}},[t._v("\n                    "+t._s(e.item.FULL_NAME)+"\n                ")])]}},{key:"item",fn:function(e){return["object"!==typeof e.item?[a("v-list-tile-content",{domProps:{textContent:t._s(e.item)}})]:[a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:t._s(e.item.FULL_NAME)}})],1)]]}}]),model:{value:t.formData.contact,callback:function(e){t.$set(t.formData,"contact",e)},expression:"formData.contact"}}),a("v-autocomplete",{attrs:{items:t.managers,chips:"",color:"blue-grey lighten-2",label:"Менеджер","item-text":"FULL_NAME","item-value":"ID"},scopedSlots:t._u([{key:"selection",fn:function(e){return[a("v-chip",{staticClass:"chip--select-multi",attrs:{selected:e.selected,close:""},on:{input:function(e){t.formData.responsible=null}}},[a("v-avatar",[a("img",{attrs:{src:e.item.PERSONAL_PHOTO}})]),t._v("\n                    "+t._s(e.item.FULL_NAME)+"\n                ")],1)]}},{key:"item",fn:function(e){return["object"!==typeof e.item?[a("v-list-tile-content",{domProps:{textContent:t._s(e.item)}})]:[a("v-list-tile-avatar",[a("img",{attrs:{src:e.item.PERSONAL_PHOTO}})]),a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:t._s(e.item.FULL_NAME)}}),a("v-list-tile-sub-title",{domProps:{innerHTML:t._s(e.item.PERSONAL_PROFESSION)}})],1)]]}}]),model:{value:t.formData.responsible,callback:function(e){t.$set(t.formData,"responsible",e)},expression:"formData.responsible"}}),a("v-btn",{attrs:{disabled:!t.valid,color:"success"},on:{click:t.validate}},[t._v("\n            Отправить в CRM\n        ")]),a("v-btn",{attrs:{color:"error"},on:{click:t.reset}},[t._v("\n            Очистить\n        ")])],1)],1)},c=[],u=(a("96cf"),a("3b8d")),m=a("2f62"),p=a("b012"),f=a.n(p),d={name:"Lead",computed:Object(l["a"])({},Object(m["b"])(["managers","loading","contacts","companies","leads","baseUrl"])),data:function(){return{newLead:!1,formData:{lead:null,name:"",lastname:"",phone:"",company:null,contact:null,responsible:null},phoneMask:"phone",userAccess:!1,valid:!0,nameRules:[function(t){return!!t||"Имя обязательно"}],lastnameRules:[function(t){return!!t||"Фамилия обязательна"}]}},methods:{validate:function(){this.$refs.form.validate()&&(this.snackbar=!0)},reset:function(){this.$store.dispatch("clearData"),this.$refs.form.reset()},setContact:function(){var t=this,e=this.contacts.filter(function(e){return e.ID===t.formData.contact}).pop(),a={id:e["COMPANY_ID"]};this.$store.dispatch("loadCompanies",a)},setCompany:function(){var t={companyId:this.formData.company};this.$store.dispatch("loadContacts",t)},searchContact:f()(function(t){var e=t.target.value;if(e.length>4){var a={query:e};this.$store.dispatch("loadContacts",a)}},500),searchCompanies:f()(function(t){var e=t.target.value;if(e.length>4){var a={query:e};this.$store.dispatch("loadCompanies",a)}},500),getLead:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(){var e,a=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e={id:this.formData.lead},t.next=3,this.axios.get(this.baseUrl+"/crm.lead.get.json",{params:e}).then(function(t){var e=t.data.result;console.log(e),a.formData.name=e.NAME,a.formData.lastname=e.LAST_NAME,a.formData.phone=e.PHONE,a.formData.company=e.COMPANY_ID,a.formData.contact=e.CONTACT_ID,a.$store.dispatch("loadCompanies",{id:e.COMPANY_ID}),a.$store.dispatch("loadContact",{id:e.CONTACT_ID}),a.formData.responsible=e.ASSIGNED_BY_ID});case 3:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},created:function(){this.$store.dispatch("loadManagers")}},v=d,h=a("2877"),b=a("6544"),_=a.n(b),g=a("7496"),y=a("c6a6"),D=a("8212"),L=a("8336"),C=a("cc20"),k=a("4bd4"),x=a("c954"),T=a("5d23"),A=a("b56d"),S=a("b73d"),E=a("2677"),V=Object(h["a"])(v,r,c,!1,null,null,null);V.options.__file="lead.vue";var O=V.exports;_()(V,{VApp:g["a"],VAutocomplete:y["a"],VAvatar:D["a"],VBtn:L["a"],VChip:C["a"],VForm:k["a"],VListTileAvatar:x["a"],VListTileContent:T["a"],VListTileSubTitle:T["b"],VListTileTitle:T["c"],VSelect:A["a"],VSwitch:S["a"],VTextField:E["a"]});var M=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{id:"contact"}},[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[!t.newContact&&t.contacts.length>0?a("v-select",{attrs:{items:t.contacts,"item-text":"FULL_NAME","item-value":"ID",label:"Выберите контакт","single-line":""},on:{change:t.getContact},model:{value:t.formData.contact,callback:function(e){t.$set(t.formData,"contact",e)},expression:"formData.contact"}}):t._e(),t.contacts.length>0?a("v-switch",{attrs:{label:"Создать новый контакт"},model:{value:t.newContact,callback:function(e){t.newContact=e},expression:"newContact"}}):t._e(),a("v-text-field",{attrs:{rules:t.nameRules,label:"Имя",required:""},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}}),a("v-text-field",{attrs:{rules:t.lastnameRules,label:"Фамилия",required:""},model:{value:t.formData.lastname,callback:function(e){t.$set(t.formData,"lastname",e)},expression:"formData.lastname"}}),a("v-text-field",{attrs:{mask:t.phoneMask,label:"Телефон",required:""},model:{value:t.formData.phone,callback:function(e){t.$set(t.formData,"phone",e)},expression:"formData.phone"}}),a("v-autocomplete",{attrs:{items:t.companies,chips:"",color:"blue-grey lighten-2",label:"Компания","item-text":"TITLE","item-value":"ID"},on:{keyup:t.searchCompanies},scopedSlots:t._u([{key:"selection",fn:function(e){return[a("v-chip",{staticClass:"chip--select-multi",attrs:{selected:e.selected,close:""},on:{input:function(e){t.formData.company=null}}},[t._v("\n                    "+t._s(e.item.TITLE)+"\n                ")])]}},{key:"item",fn:function(e){return["object"!==typeof e.item?[a("v-list-tile-content",{domProps:{textContent:t._s(e.item)}})]:[a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:t._s(e.item.TITLE)}})],1)]]}}]),model:{value:t.formData.company,callback:function(e){t.$set(t.formData,"company",e)},expression:"formData.company"}}),a("v-autocomplete",{attrs:{items:t.managers,chips:"",color:"blue-grey lighten-2",label:"Менеджер","item-text":"FULL_NAME","item-value":"ID"},scopedSlots:t._u([{key:"selection",fn:function(e){return[a("v-chip",{staticClass:"chip--select-multi",attrs:{selected:e.selected,close:""},on:{input:function(e){t.formData.responsible=null}}},[a("v-avatar",[a("img",{attrs:{src:e.item.PERSONAL_PHOTO}})]),t._v("\n                    "+t._s(e.item.FULL_NAME)+"\n                ")],1)]}},{key:"item",fn:function(e){return["object"!==typeof e.item?[a("v-list-tile-content",{domProps:{textContent:t._s(e.item)}})]:[a("v-list-tile-avatar",[a("img",{attrs:{src:e.item.PERSONAL_PHOTO}})]),a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:t._s(e.item.FULL_NAME)}}),a("v-list-tile-sub-title",{domProps:{innerHTML:t._s(e.item.PERSONAL_PROFESSION)}})],1)]]}}]),model:{value:t.formData.responsible,callback:function(e){t.$set(t.formData,"responsible",e)},expression:"formData.responsible"}}),a("v-btn",{attrs:{disabled:!t.valid,color:"success"},on:{click:t.validate}},[t._v("\n            Отправить в CRM\n        ")]),a("v-btn",{attrs:{color:"error"},on:{click:t.reset}},[t._v("\n            Очистить\n        ")])],1)],1)},N=[],P={name:"Contact",computed:Object(l["a"])({},Object(m["b"])(["managers","baseUrl","loading","companies","contacts"])),data:function(){return{newContact:!1,formData:{name:"",lastname:"",phone:"",company:null,contact:null,responsible:null},phoneMask:"phone",userAccess:!1,valid:!0,nameRules:[function(t){return!!t||"Имя обязательно"}],lastnameRules:[function(t){return!!t||"Фамилия обязательна"}]}},methods:{validate:function(){this.$refs.form.validate()&&(this.snackbar=!0)},reset:function(){this.$store.dispatch("clearData"),this.$refs.form.reset()},searchCompanies:f()(function(t){var e=t.target.value;if(e.length>4){var a={query:e};this.$store.dispatch("loadCompanies",a)}},500),getContact:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(){var e,a=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e={id:this.formData.contact},t.next=3,this.axios.get(this.baseUrl+"/crm.contact.get.json",{params:e}).then(function(t){var e=t.data.result;a.formData.name=e.NAME,a.formData.lastname=e.LAST_NAME,a.formData.phone=e.PHONE;var n={id:e.COMPANY_ID};a.$store.dispatch("loadCompanies",n),a.formData.company=e.COMPANY_ID,a.formData.responsible=e.ASSIGNED_BY_ID});case 3:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},created:function(){this.$store.dispatch("loadManagers")}},I=P,$=Object(h["a"])(I,M,N,!1,null,null,null);$.options.__file="contact.vue";var U=$.exports;_()($,{VApp:g["a"],VAutocomplete:y["a"],VAvatar:D["a"],VBtn:L["a"],VChip:C["a"],VForm:k["a"],VListTileAvatar:x["a"],VListTileContent:T["a"],VListTileSubTitle:T["b"],VListTileTitle:T["c"],VSelect:A["a"],VSwitch:S["a"],VTextField:E["a"]});var w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{id:"company"}},[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[!t.newCompany&&t.companies.length>0?a("v-select",{attrs:{items:t.companies,"item-text":"TITLE","item-value":"ID",label:"Выберите компанию","single-line":""},on:{change:t.getCompany},model:{value:t.formData.company,callback:function(e){t.$set(t.formData,"company",e)},expression:"formData.company"}}):t._e(),t.companies.length>0?a("v-switch",{attrs:{label:"Создать новую компанию"},model:{value:t.newCompany,callback:function(e){t.newCompany=e},expression:"newCompany"}}):t._e(),a("v-text-field",{attrs:{rules:t.titleRules,label:"Название",required:""},model:{value:t.formData.title,callback:function(e){t.$set(t.formData,"title",e)},expression:"formData.title"}}),a("v-text-field",{attrs:{mask:t.phoneMask,label:"Телефон",required:""},model:{value:t.formData.phone,callback:function(e){t.$set(t.formData,"phone",e)},expression:"formData.phone"}}),a("v-autocomplete",{attrs:{items:t.managers,chips:"",color:"blue-grey lighten-2",label:"Менеджер","item-text":"FULL_NAME","item-value":"ID"},scopedSlots:t._u([{key:"selection",fn:function(e){return[a("v-chip",{staticClass:"chip--select-multi",attrs:{selected:e.selected,close:""},on:{input:function(e){t.formData.responsible=null}}},[a("v-avatar",[a("img",{attrs:{src:e.item.PERSONAL_PHOTO}})]),t._v("\n                    "+t._s(e.item.FULL_NAME)+"\n                ")],1)]}},{key:"item",fn:function(e){return["object"!==typeof e.item?[a("v-list-tile-content",{domProps:{textContent:t._s(e.item)}})]:[a("v-list-tile-avatar",[a("img",{attrs:{src:e.item.PERSONAL_PHOTO}})]),a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:t._s(e.item.FULL_NAME)}}),a("v-list-tile-sub-title",{domProps:{innerHTML:t._s(e.item.PERSONAL_PROFESSION)}})],1)]]}}]),model:{value:t.formData.responsible,callback:function(e){t.$set(t.formData,"responsible",e)},expression:"formData.responsible"}}),a("v-btn",{attrs:{disabled:!t.valid,color:"success"},on:{click:t.validate}},[t._v("\n            Отправить в CRM\n        ")]),a("v-btn",{attrs:{color:"error"},on:{click:t.reset}},[t._v("\n            Очистить\n        ")])],1)],1)},j=[],R={name:"Company",computed:Object(l["a"])({},Object(m["b"])(["managers","loading","companies","baseUrl"])),data:function(){return{newCompany:!1,formData:{title:"",phone:"",company:null,responsible:null},phoneMask:"phone",userAccess:!1,valid:!0,titleRules:[function(t){return!!t||"Название обязательно"}]}},methods:{validate:function(){this.$refs.form.validate()&&(this.snackbar=!0)},reset:function(){this.$store.dispatch("clearData"),this.$refs.form.reset()},getCompany:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(){var e,a=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e={id:this.formData.company},t.next=3,this.axios.get(this.baseUrl+"/crm.company.get.json",{params:e}).then(function(t){var e=t.data.result;a.formData.title=e.TITLE,a.formData.phone=e.PHONE,a.formData.responsible=e.ASSIGNED_BY_ID});case 3:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},created:function(){this.$store.dispatch("loadManagers")}},F=R,q=Object(h["a"])(F,w,j,!1,null,null,null);q.options.__file="company.vue";var H=q.exports;_()(q,{VApp:g["a"],VAutocomplete:y["a"],VAvatar:D["a"],VBtn:L["a"],VChip:C["a"],VForm:k["a"],VListTileAvatar:x["a"],VListTileContent:T["a"],VListTileSubTitle:T["b"],VListTileTitle:T["c"],VSelect:A["a"],VSwitch:S["a"],VTextField:E["a"]});var B=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{id:"deal"}},[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-text-field",{attrs:{rules:t.titleRules,label:"Название",required:""},model:{value:t.formData.title,callback:function(e){t.$set(t.formData,"title",e)},expression:"formData.title"}}),a("v-text-field",{attrs:{mask:t.phoneMask,label:"Телефон",required:""},model:{value:t.formData.phone,callback:function(e){t.$set(t.formData,"phone",e)},expression:"formData.phone"}}),a("v-autocomplete",{attrs:{items:t.companies,chips:"",color:"blue-grey lighten-2",label:"Компания","item-text":"TITLE","item-value":"ID"},on:{input:t.setCompany,keyup:t.searchCompanies},scopedSlots:t._u([{key:"selection",fn:function(e){return[a("v-chip",{staticClass:"chip--select-multi",attrs:{selected:e.selected,close:""},on:{input:function(e){t.formData.company=null}}},[t._v("\n                    "+t._s(e.item.TITLE)+"\n                ")])]}},{key:"item",fn:function(e){return["object"!==typeof e.item?[a("v-list-tile-content",{domProps:{textContent:t._s(e.item)}})]:[a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:t._s(e.item.TITLE)}})],1)]]}}]),model:{value:t.formData.company,callback:function(e){t.$set(t.formData,"company",e)},expression:"formData.company"}}),a("v-autocomplete",{attrs:{items:t.contacts,chips:"",color:"blue-grey lighten-2",label:"Контакт","item-text":"FULL_NAME","item-value":"ID"},on:{input:t.setContact,keyup:t.searchContact},scopedSlots:t._u([{key:"selection",fn:function(e){return[a("v-chip",{staticClass:"chip--select-multi",attrs:{selected:e.selected,close:""},on:{input:function(e){t.contact=null}}},[t._v("\n                    "+t._s(e.item.FULL_NAME)+"\n                ")])]}},{key:"item",fn:function(e){return["object"!==typeof e.item?[a("v-list-tile-content",{domProps:{textContent:t._s(e.item)}})]:[a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:t._s(e.item.FULL_NAME)}})],1)]]}}]),model:{value:t.formData.contact,callback:function(e){t.$set(t.formData,"contact",e)},expression:"formData.contact"}}),a("v-autocomplete",{attrs:{items:t.managers,chips:"",color:"blue-grey lighten-2",label:"Менеджер","item-text":"FULL_NAME","item-value":"ID"},scopedSlots:t._u([{key:"selection",fn:function(e){return[a("v-chip",{staticClass:"chip--select-multi",attrs:{selected:e.selected,close:""},on:{input:function(e){t.formData.responsible=null}}},[a("v-avatar",[a("img",{attrs:{src:e.item.PERSONAL_PHOTO}})]),t._v("\n                    "+t._s(e.item.FULL_NAME)+"\n                ")],1)]}},{key:"item",fn:function(e){return["object"!==typeof e.item?[a("v-list-tile-content",{domProps:{textContent:t._s(e.item)}})]:[a("v-list-tile-avatar",[a("img",{attrs:{src:e.item.PERSONAL_PHOTO}})]),a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:t._s(e.item.FULL_NAME)}}),a("v-list-tile-sub-title",{domProps:{innerHTML:t._s(e.item.PERSONAL_PROFESSION)}})],1)]]}}]),model:{value:t.formData.responsible,callback:function(e){t.$set(t.formData,"responsible",e)},expression:"formData.responsible"}}),a("v-btn",{attrs:{disabled:!t.valid,color:"success"},on:{click:t.validate}},[t._v("\n            Отправить в CRM\n        ")]),a("v-btn",{attrs:{color:"error"},on:{click:t.reset}},[t._v("\n            Очистить\n        ")])],1)],1)},Y=[],z={name:"Deal",computed:Object(l["a"])({},Object(m["b"])(["managers","loading","contacts","companies"])),data:function(){return{formData:{title:"",phone:"",company:null,contact:null,responsible:null,type:null,direction:null},phoneMask:"phone",userAccess:!1,valid:!0,titleRules:[function(t){return!!t||"Название обязательно"}]}},methods:{validate:function(){this.$refs.form.validate()&&(this.snackbar=!0)},reset:function(){this.$store.dispatch("clearData"),this.$refs.form.reset()},setContact:function(){var t=this,e=this.contacts.filter(function(e){return e.ID===t.formData.contact}).pop(),a={id:e["COMPANY_ID"]};this.$store.dispatch("loadCompanies",a)},setCompany:function(){var t={companyId:this.formData.company};this.$store.dispatch("loadContacts",t)},searchContact:f()(function(t){var e=t.target.value;if(e.length>4){var a={query:e};this.$store.dispatch("loadContacts",a)}},500),searchCompanies:f()(function(t){var e=t.target.value;if(e.length>4){var a={query:e};this.$store.dispatch("loadCompanies",a)}},500)},created:function(){this.$store.dispatch("loadManagers")}},G=z,Q=Object(h["a"])(G,B,Y,!1,null,null,null);Q.options.__file="deal.vue";var J=Q.exports;_()(Q,{VApp:g["a"],VAutocomplete:y["a"],VAvatar:D["a"],VBtn:L["a"],VChip:C["a"],VForm:k["a"],VListTileAvatar:x["a"],VListTileContent:T["a"],VListTileSubTitle:T["b"],VListTileTitle:T["c"],VTextField:E["a"]});var W=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{id:"quote"}},[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-text-field",{attrs:{rules:t.titleRules,label:"Название",required:""},model:{value:t.formData.title,callback:function(e){t.$set(t.formData,"title",e)},expression:"formData.title"}}),a("v-autocomplete",{attrs:{disabled:t.formData.contact,items:t.companies,chips:"",color:"blue-grey lighten-2",label:"Компания","item-text":"TITLE","item-value":"ID"},on:{input:t.setCompany,keyup:t.searchCompanies},scopedSlots:t._u([{key:"selection",fn:function(e){return[a("v-chip",{staticClass:"chip--select-multi",attrs:{selected:e.selected,close:""},on:{input:function(e){t.formData.company=null}}},[t._v("\n                    "+t._s(e.item.TITLE)+"\n                ")])]}},{key:"item",fn:function(e){return["object"!==typeof e.item?[a("v-list-tile-content",{domProps:{textContent:t._s(e.item)}})]:[a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:t._s(e.item.TITLE)}})],1)]]}}]),model:{value:t.formData.company,callback:function(e){t.$set(t.formData,"company",e)},expression:"formData.company"}}),a("v-autocomplete",{attrs:{disabled:t.formData.company,items:t.contacts,chips:"",color:"blue-grey lighten-2",label:"Контакт","item-text":"FULL_NAME","item-value":"ID"},on:{input:t.setContact,keyup:t.searchContact},scopedSlots:t._u([{key:"selection",fn:function(e){return[a("v-chip",{staticClass:"chip--select-multi",attrs:{selected:e.selected,close:""},on:{input:function(e){t.formData.contact=null}}},[t._v("\n                    "+t._s(e.item.FULL_NAME)+"\n                ")])]}},{key:"item",fn:function(e){return["object"!==typeof e.item?[a("v-list-tile-content",{domProps:{textContent:t._s(e.item)}})]:[a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:t._s(e.item.FULL_NAME)}})],1)]]}}]),model:{value:t.formData.contact,callback:function(e){t.$set(t.formData,"contact",e)},expression:"formData.contact"}}),a("v-autocomplete",{attrs:{items:t.managers,chips:"",color:"blue-grey lighten-2",label:"Менеджер","item-text":"FULL_NAME","item-value":"ID"},scopedSlots:t._u([{key:"selection",fn:function(e){return[a("v-chip",{staticClass:"chip--select-multi",attrs:{selected:e.selected,close:""},on:{input:function(e){t.formData.responsible=null}}},[a("v-avatar",[a("img",{attrs:{src:e.item.PERSONAL_PHOTO}})]),t._v("\n                    "+t._s(e.item.FULL_NAME)+"\n                ")],1)]}},{key:"item",fn:function(e){return["object"!==typeof e.item?[a("v-list-tile-content",{domProps:{textContent:t._s(e.item)}})]:[a("v-list-tile-avatar",[a("img",{attrs:{src:e.item.PERSONAL_PHOTO}})]),a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:t._s(e.item.FULL_NAME)}}),a("v-list-tile-sub-title",{domProps:{innerHTML:t._s(e.item.PERSONAL_PROFESSION)}})],1)]]}}]),model:{value:t.formData.responsible,callback:function(e){t.$set(t.formData,"responsible",e)},expression:"formData.responsible"}}),a("v-btn",{attrs:{disabled:!t.valid,color:"success"},on:{click:t.validate}},[t._v("\n            Отправить в CRM\n        ")]),a("v-btn",{attrs:{color:"error"},on:{click:t.reset}},[t._v("\n            Очистить\n        ")])],1)],1)},X=[],K={name:"Quote",computed:Object(l["a"])({},Object(m["b"])(["managers","loading","contacts","companies"])),data:function(){return{formData:{title:"",company:null,contact:null,responsible:null,type:null,direction:null},userAccess:!1,valid:!0,titleRules:[function(t){return!!t||"Название обязательно"}]}},methods:{validate:function(){this.$refs.form.validate()&&(this.snackbar=!0)},reset:function(){this.$store.dispatch("clearData"),this.$refs.form.reset()},setContact:function(){this.formData.company=null},setCompany:function(){this.formData.contact=null},searchContact:f()(function(t){var e=t.target.value;if(e.length>4){var a={query:e};this.$store.dispatch("loadContacts",a)}},500),searchCompanies:f()(function(t){var e=t.target.value;if(e.length>4){var a={query:e};this.$store.dispatch("loadCompanies",a)}},500)},created:function(){this.$store.dispatch("loadManagers")}},Z=K,tt=Object(h["a"])(Z,W,X,!1,null,null,null);tt.options.__file="quote.vue";var et=tt.exports;_()(tt,{VApp:g["a"],VAutocomplete:y["a"],VAvatar:D["a"],VBtn:L["a"],VChip:C["a"],VForm:k["a"],VListTileAvatar:x["a"],VListTileContent:T["a"],VListTileSubTitle:T["b"],VListTileTitle:T["c"],VTextField:E["a"]});var at=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{id:"task"}},[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-text-field",{attrs:{rules:t.titleRules,label:"Название",required:""},model:{value:t.formData.title,callback:function(e){t.$set(t.formData,"title",e)},expression:"formData.title"}}),a("v-textarea",{attrs:{solo:"",label:"Описание задачи"},model:{value:t.formData.description,callback:function(e){t.$set(t.formData,"description",e)},expression:"formData.description"}}),a("v-autocomplete",{attrs:{disabled:t.formData.contact,items:t.companies,chips:"",color:"blue-grey lighten-2",label:"Компания","item-text":"TITLE","item-value":"ID"},on:{input:t.setCompany,keyup:t.searchCompanies},scopedSlots:t._u([{key:"selection",fn:function(e){return[a("v-chip",{staticClass:"chip--select-multi",attrs:{selected:e.selected,close:""},on:{input:function(e){t.formData.company=null}}},[t._v("\n                    "+t._s(e.item.TITLE)+"\n                ")])]}},{key:"item",fn:function(e){return["object"!==typeof e.item?[a("v-list-tile-content",{domProps:{textContent:t._s(e.item)}})]:[a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:t._s(e.item.TITLE)}})],1)]]}}]),model:{value:t.formData.company,callback:function(e){t.$set(t.formData,"company",e)},expression:"formData.company"}}),a("v-autocomplete",{attrs:{disabled:t.formData.company,items:t.contacts,chips:"",color:"blue-grey lighten-2",label:"Контакт","item-text":"FULL_NAME","item-value":"ID"},on:{input:t.setContact,keyup:t.searchContact},scopedSlots:t._u([{key:"selection",fn:function(e){return[a("v-chip",{staticClass:"chip--select-multi",attrs:{selected:e.selected,close:""},on:{input:function(e){t.formData.contact=null}}},[t._v("\n                    "+t._s(e.item.FULL_NAME)+"\n                ")])]}},{key:"item",fn:function(e){return["object"!==typeof e.item?[a("v-list-tile-content",{domProps:{textContent:t._s(e.item)}})]:[a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:t._s(e.item.FULL_NAME)}})],1)]]}}]),model:{value:t.formData.contact,callback:function(e){t.$set(t.formData,"contact",e)},expression:"formData.contact"}}),a("v-autocomplete",{attrs:{items:t.managers,chips:"",color:"blue-grey lighten-2",label:"Менеджер","item-text":"FULL_NAME","item-value":"ID"},scopedSlots:t._u([{key:"selection",fn:function(e){return[a("v-chip",{staticClass:"chip--select-multi",attrs:{selected:e.selected,close:""},on:{input:function(e){t.formData.responsible=null}}},[a("v-avatar",[a("img",{attrs:{src:e.item.PERSONAL_PHOTO}})]),t._v("\n                    "+t._s(e.item.FULL_NAME)+"\n                ")],1)]}},{key:"item",fn:function(e){return["object"!==typeof e.item?[a("v-list-tile-content",{domProps:{textContent:t._s(e.item)}})]:[a("v-list-tile-avatar",[a("img",{attrs:{src:e.item.PERSONAL_PHOTO}})]),a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:t._s(e.item.FULL_NAME)}}),a("v-list-tile-sub-title",{domProps:{innerHTML:t._s(e.item.PERSONAL_PROFESSION)}})],1)]]}}]),model:{value:t.formData.responsible,callback:function(e){t.$set(t.formData,"responsible",e)},expression:"formData.responsible"}}),a("v-btn",{attrs:{disabled:!t.valid,color:"success"},on:{click:t.validate}},[t._v("\n            Отправить в CRM\n        ")]),a("v-btn",{attrs:{color:"error"},on:{click:t.reset}},[t._v("\n            Очистить\n        ")])],1)],1)},nt=[],ot={name:"Task",computed:Object(l["a"])({},Object(m["b"])(["managers","loading","contacts","companies"])),data:function(){return{formData:{title:"",company:null,contact:null,responsible:null,type:null,direction:null,description:""},userAccess:!1,valid:!0,titleRules:[function(t){return!!t||"Название обязательно"}]}},methods:{validate:function(){this.$refs.form.validate()&&(this.snackbar=!0)},reset:function(){this.$store.dispatch("clearData"),this.$refs.form.reset()},setContact:function(){this.formData.company=null},setCompany:function(){this.formData.contact=null},searchContact:f()(function(t){var e=t.target.value;if(e.length>4){var a={query:e};this.$store.dispatch("loadContacts",a)}},500),searchCompanies:f()(function(t){var e=t.target.value;if(e.length>4){var a={query:e};this.$store.dispatch("loadCompanies",a)}},500)},created:function(){this.$store.dispatch("loadManagers")}},it=ot,st=a("a844"),lt=Object(h["a"])(it,at,nt,!1,null,null,null);lt.options.__file="task.vue";var rt=lt.exports;_()(lt,{VApp:g["a"],VAutocomplete:y["a"],VAvatar:D["a"],VBtn:L["a"],VChip:C["a"],VForm:k["a"],VListTileAvatar:x["a"],VListTileContent:T["a"],VListTileSubTitle:T["b"],VListTileTitle:T["c"],VTextField:E["a"],VTextarea:st["a"]});var ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{id:"settings"}},[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-text-field",{attrs:{rules:t.required,label:"Название",required:""},model:{value:t.baseUrl,callback:function(e){t.baseUrl=e},expression:"baseUrl"}}),a("v-text-field",{attrs:{rules:t.required,label:"Веб-хук",required:"",type:"password"},model:{value:t.hook,callback:function(e){t.hook=e},expression:"hook"}}),a("v-text-field",{attrs:{rules:t.required,label:"ID пользователя веб-хука",required:""},model:{value:t.userId,callback:function(e){t.userId=e},expression:"userId"}}),a("v-btn",{attrs:{disabled:!t.valid,color:"success"},on:{click:t.validate}},[t._v("\n            Сохранить\n        ")]),a("v-btn",{attrs:{color:"error"},on:{click:t.reset}},[t._v("\n            Очистить\n        ")])],1)],1)},ut=[],mt={name:"Settings",data:function(){return{valid:!0,userId:localStorage.userId,baseUrl:localStorage.baseUrl,hook:localStorage.hook,required:[function(t){return!!t||"Обязательно для заполнения"}]}},props:{source:String},methods:{onSubmit:function(t){t.preventDefault(),this.$refs.form.validate()&&(this.snackbar=!0,localStorage.hook=this.hook,localStorage.baseUrl=this.baseUrl,localStorage.userId=this.userId,this.$emit("login"))}}},pt=mt,ft=Object(h["a"])(pt,ct,ut,!1,null,null,null);ft.options.__file="settings.vue";var dt=ft.exports;_()(ft,{VApp:g["a"],VBtn:L["a"],VForm:k["a"],VTextField:E["a"]});var vt=a("9845"),ht=a.n(vt),bt={name:"Base",components:{Lead:O,Contact:U,Company:H,Deal:J,Quote:et,Task:rt,Settings:dt,Browser:ht.a},computed:Object(l["a"])({},Object(m["b"])(["scope","loading","contacts","companies","leads","counter"])),data:function(){return{mini:!0,drawer:!0,selectComponent:null,crmAccess:!1,taskAccess:!1}},methods:{changeComponent:function(t){this.selectComponent=t}},mounted:function(){},created:function(){var t=this;this.$store.dispatch("loadScope").then(function(){-1!==t.scope.indexOf("crm")&&(t.crmAccess=!0,t.$store.dispatch("init").then(function(){})),-1!==t.scope.indexOf("task")&&(t.taskAccess=!0)}),ht.a.tabs.query({currentWindow:!0,active:!0}).then(function(t){console.log(t)},function(t){console.log(t)})}},_t=bt,gt=a("4ca6"),yt=a("b0af"),Dt=a("12b2"),Lt=a("a523"),Ct=a("549c"),kt=a("0e8f"),xt=a("553a"),Tt=a("132d"),At=a("a722"),St=a("8860"),Et=a("ba95"),Vt=a("40fe"),Ot=a("f774"),Mt=a("9910"),Nt=a("71d9"),Pt=a("706c"),It=a("2a7f"),$t=Object(h["a"])(_t,i,s,!1,null,null,null);$t.options.__file="base.vue";var Ut=$t.exports;_()($t,{VApp:g["a"],VBadge:gt["a"],VCard:yt["a"],VCardTitle:Dt["a"],VContainer:Lt["a"],VContent:Ct["a"],VFlex:kt["a"],VFooter:xt["a"],VIcon:Tt["a"],VLayout:At["a"],VList:St["a"],VListTile:Et["a"],VListTileAction:Vt["a"],VListTileContent:T["a"],VListTileTitle:T["c"],VNavigationDrawer:Ot["a"],VSpacer:Mt["a"],VToolbar:Nt["a"],VToolbarSideIcon:Pt["a"],VToolbarTitle:It["a"]});var wt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{id:"inspire"}},[a("v-content",[a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-layout",{attrs:{"align-center":"","justify-center":""}},[a("v-flex",{attrs:{xs12:"",sm8:"",md4:""}},[a("v-card",{staticClass:"elevation-12"},[a("v-toolbar",{attrs:{dark:"",color:"primary"}},[a("v-toolbar-title",[t._v("Данные для подключения")])],1),a("v-card-text",[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-text-field",{attrs:{rules:t.required,"prepend-icon":"home",label:"Адрес портала",type:"text"},model:{value:t.baseUrl,callback:function(e){t.baseUrl=e},expression:"baseUrl"}}),a("v-text-field",{attrs:{rules:t.required,id:"password","prepend-icon":"info",label:"Входящий веб-хук",type:"password"},model:{value:t.hook,callback:function(e){t.hook=e},expression:"hook"}}),a("v-text-field",{attrs:{rules:t.required,id:"userId","prepend-icon":"account_circle",label:"ID пользователя, создавшего вебхук",type:"text"},model:{value:t.userId,callback:function(e){t.userId=e},expression:"userId"}})],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary"},on:{click:t.onSubmit}},[t._v("Сохранить")])],1)],1)],1)],1)],1)],1)],1)},jt=[],Rt={data:function(){return{valid:!0,userId:"",baseUrl:"",hook:"",required:[function(t){return!!t||"Обязательно для заполнения"}]}},props:{source:String},methods:{onSubmit:function(t){t.preventDefault(),this.$refs.form.validate()&&(this.snackbar=!0,localStorage.hook=this.hook,localStorage.baseUrl=this.baseUrl,localStorage.userId=this.userId,this.$emit("login"))}}},Ft=Rt,qt=a("99d9"),Ht=Object(h["a"])(Ft,wt,jt,!1,null,null,null);Ht.options.__file="auth.vue";var Bt=Ht.exports;_()(Ht,{VApp:g["a"],VBtn:L["a"],VCard:yt["a"],VCardActions:qt["a"],VCardText:qt["b"],VContainer:Lt["a"],VContent:Ct["a"],VFlex:kt["a"],VForm:k["a"],VLayout:At["a"],VSpacer:Mt["a"],VTextField:E["a"],VToolbar:Nt["a"],VToolbarTitle:It["a"]});var Yt={name:"App",components:{Auth:Bt,Base:Ut},data:function(){return{selectComponent:null}},mounted:function(){if("undefined"!=typeof localStorage.hook&&"undefined"!=typeof localStorage.baseUrl&&"undefined"!=typeof localStorage.userId){this.selectComponent="Base";var t=localStorage.baseUrl+"/rest/"+localStorage.userId+"/"+localStorage.hook;this.$store.dispatch("setBaseUrl",t)}else this.selectComponent="Auth"},methods:{login:function(){this.selectComponent="Base"}}},zt=Yt,Gt=Object(h["a"])(zt,n,o,!1,null,null,null);Gt.options.__file="App.vue";e["a"]=Gt.exports;_()(Gt,{VApp:g["a"],VContent:Ct["a"]})},"402c":function(t,e,a){"use strict";a("cadf"),a("551c"),a("097d");var n=a("2b0e"),o=a("bb71");a("da64");n["a"].use(o["a"],{iconfont:"md"})},"56d7":function(t,e,a){"use strict";a.r(e),function(t){a("cadf"),a("551c"),a("097d");var e=a("2b0e"),n=(a("402c"),a("3dfd")),o=a("bc3a"),i=a.n(o),s=a("a7fe"),l=a.n(s),r=a("c0d6");t.browser=a("9845"),e["a"].use(l.a,i.a),e["a"].config.productionTip=!1,new e["a"]({store:r["a"],render:function(t){return t(n["a"])}}).$mount("#app")}.call(this,a("c8ba"))},c0d6:function(t,e,a){"use strict";a("96cf");var n=a("3b8d"),o=(a("cadf"),a("551c"),a("097d"),a("2b0e")),i=a("2f62"),s=a("bc3a"),l=a.n(s),r=a("a7fe"),c=a.n(r);o["a"].use(c.a,l.a),o["a"].use(i["a"]);var u={email:"n-kis@bitrix24.ru",leads:[],loading:!0,managers:[],baseUrl:"",scope:[],contacts:[],companies:[],counter:{leads:0,companies:0,contacts:0}},m={updateBaseUrl:function(t,e){t.baseUrl=e},updateScope:function(t,e){t.scope=e},updateManagers:function(t,e){t.managers=e},updateContacts:function(t,e){t.contacts=e},updateCompanies:function(t,e){t.companies=e},changeLoadingState:function(t,e){t.loading=e},clearData:function(t){t.contacts=[],t.companies=[]},updateEmail:function(t,e){t.email=e},updateLeads:function(t,e){t.leads=e},updateCounter:function(t,e){e.leads&&(t.counter.leads=e.leads),e.contacts&&(t.counter.contacts=e.contacts),e.companies&&(t.counter.companies=e.companies)}},p={clearData:function(t){var e=t.commit;e("clearData")},setBaseUrl:function(t,e){var a=t.commit;a("updateBaseUrl",e)},setEmail:function(t,e){var a=t.commit;a("updateEmail",e)},init:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e.commit("changeLoadingState",!0),a={select:["ID","NAME","LAST_NAME"],filter:{EMAIL:u.email}},t.next=4,l.a.post(u.baseUrl+"/crm.contact.list.json",a).then(function(t){e.commit("updateContacts",t.data.result),e.commit("updateCounter",{contacts:t.data.result.length})});case 4:return t.next=6,l.a.post(u.baseUrl+"/crm.company.list.json",a).then(function(t){e.commit("updateCompanies",t.data.result),e.commit("updateCounter",{companies:t.data.result.length})});case 6:return t.next=8,l.a.post(u.baseUrl+"/crm.lead.list.json",a).then(function(t){e.commit("updateLeads",t.data.result),e.commit("updateCounter",{leads:t.data.result.length})});case 8:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),loadScope:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(u.scope.length){t.next=4;break}return e.commit("changeLoadingState",!0),t.next=4,l.a.get(u.baseUrl+"/scope/").then(function(t){e.commit("updateScope",t.data.result),e.commit("changeLoadingState",!1)});case 4:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),loadManagers:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(u.managers.length){t.next=5;break}return e.commit("changeLoadingState",!0),a={ACTIVE:"Y"},t.next=5,l.a.get(u.baseUrl+"/user.get.json",{params:a}).then(function(t){e.commit("updateManagers",t.data.result),e.commit("changeLoadingState",!1)});case 5:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),loadContacts:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e,a){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e.commit("changeLoadingState",!0),n={select:["ID","NAME","LAST_NAME","COMPANY_ID"],filter:{"%LAST_NAME":a.query}},void 0!==a.companyId&&(n.filter["COMPANY_ID"]=a.companyId),t.next=5,l.a.post(u.baseUrl+"/crm.contact.list.json",n).then(function(t){e.commit("updateContacts",t.data.result),e.commit("changeLoadingState",!1)});case 5:case"end":return t.stop()}},t,this)}));function e(e,a){return t.apply(this,arguments)}return e}(),loadCompanies:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e,a){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e.commit("changeLoadingState",!0),n={select:["TITLE","ID"],filter:{"%TITLE":a.query}},void 0!==a.id&&(n.filter["ID"]=a.id),t.next=5,l.a.post(u.baseUrl+"/crm.company.list.json",n).then(function(t){e.commit("updateCompanies",t.data.result),e.commit("changeLoadingState",!1)});case 5:case"end":return t.stop()}},t,this)}));function e(e,a){return t.apply(this,arguments)}return e}()},f={baseUrl:function(t){return t.baseUrl},scope:function(t){return t.scope},managers:function(t){return t.managers.filter(function(t){return t.PERSONAL_PHOTO}).map(function(t){return t.FULL_NAME=t.NAME+" "+t.LAST_NAME,t})},contacts:function(t){return t.contacts.map(function(t){return t.FULL_NAME=t.NAME+" "+t.LAST_NAME,t})},companies:function(t){return t.companies},leads:function(t){return t.leads.map(function(t){return t.FULL_NAME=t.NAME+" "+t.LAST_NAME,t})},email:function(t){return t.email},counter:function(t){return t.counter}};e["a"]=new i["a"].Store({state:u,getters:f,actions:p,mutations:m})}});
//# sourceMappingURL=app.5536e721.js.map