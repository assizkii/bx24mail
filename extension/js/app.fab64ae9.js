(function(t){function e(e){for(var n,s,r=e[0],l=e[1],c=e[2],m=0,p=[];m<r.length;m++)s=r[m],o[s]&&p.push(o[s][0]),o[s]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);u&&u(e);while(p.length)p.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],n=!0,r=1;r<a.length;r++){var l=a[r];0!==o[l]&&(n=!1)}n&&(i.splice(e--,1),t=s(s.s=a[0]))}return t}var n={},o={app:0},i=[];function s(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=n,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(a,n,function(e){return t[e]}.bind(null,n));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var u=l;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"02b4":function(t,e,a){},"3dfd":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("v-content",[a("v-toolbar",{attrs:{color:"cyan",dark:"",left:"",dense:"",app:""}},[a("v-toolbar-side-icon"),a("v-toolbar-title",[t._v("BX24 Gmail")])],1),t.selectComponent?a(t.selectComponent,{tag:"component",on:{login:t.login}}):t._e()],1)],1)},o=[],i=(a("7f7f"),a("cadf"),a("551c"),a("097d"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{id:"inspire"}},[a("v-navigation-drawer",{attrs:{"hide-overlay":"",stateless:"",app:"","mt-5":"",width:"180","mini-variant":t.mini},on:{"update:miniVariant":function(e){t.mini=e}},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[a("v-list",{attrs:{dense:""}},[t.crmAccess?a("v-list-tile",{on:{click:function(e){t.changeComponent("Lead")}}},[a("v-list-tile-action",[a("v-badge",{attrs:{right:"",color:"primary"}},[t.counter.leads>0?a("span",{attrs:{slot:"badge"},slot:"badge"},[t._v("\n                            "+t._s(t.counter.leads)+"\n                          ")]):t._e(),t.counter.leads?a("v-icon",{attrs:{slot:"badge",dark:"",small:""},slot:"badge"}):t._e(),a("v-icon",{attrs:{large:""}},[t._v("accessibility")])],1)],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Лид")])],1)],1):t._e(),t.crmAccess?a("v-list-tile",{on:{click:function(e){t.changeComponent("Contact")}}},[a("v-list-tile-action",[a("v-badge",{attrs:{right:"",color:"primary"}},[t.counter.contacts>0?a("span",{attrs:{slot:"badge"},slot:"badge"},[t._v("\n                            "+t._s(t.counter.contacts)+"\n                          ")]):t._e(),t.counter.contacts>0?a("v-icon",{attrs:{slot:"badge",dark:"",small:""},slot:"badge"}):t._e(),a("v-icon",{attrs:{large:""}},[t._v("account_box")])],1)],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Контакт ")])],1)],1):t._e(),t.crmAccess?a("v-list-tile",{on:{click:function(e){t.changeComponent("Company")}}},[a("v-list-tile-action",[a("v-badge",{attrs:{right:"",color:"primary"}},[t.counter.companies>0?a("span",{attrs:{slot:"badge"},slot:"badge"},[t._v("\n                            "+t._s(t.counter.companies)+"\n                          ")]):t._e(),t.counter.companies>0?a("v-icon",{attrs:{slot:"badge",dark:"",small:""},slot:"badge"}):t._e(),a("v-icon",{attrs:{large:""}},[t._v("supervisor_account")])],1)],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Компания")])],1)],1):t._e(),t.crmAccess?a("v-list-tile",{on:{click:function(e){t.changeComponent("Deal")}}},[a("v-list-tile-action",[a("v-icon",{attrs:{large:""}},[t._v("work")])],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Сделка")])],1)],1):t._e(),t.crmAccess?a("v-list-tile",{on:{click:function(e){t.changeComponent("Quote")}}},[a("v-list-tile-action",[a("v-icon",{attrs:{large:""}},[t._v("contact_mail")])],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Предложение")])],1)],1):t._e(),t.taskAccess?a("v-list-tile",{on:{click:function(e){t.changeComponent("Task")}}},[a("v-list-tile-action",[a("v-icon",{attrs:{large:""}},[t._v("done")])],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Задача")])],1)],1):t._e(),a("v-list-tile",{on:{click:function(e){t.changeComponent("Settings")}}},[a("v-list-tile-action",[a("v-icon",{attrs:{large:""}},[t._v("settings")])],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Настройки")])],1)],1)],1)],1),a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-layout",{attrs:{"justify-center":"","align-center":""}},[a("v-flex",{attrs:{"text-xs-left":""}},["Settings"!==t.selectComponent||"Task"!==t.selectComponent?a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[a("div",[a("h2",[t._v(t._s(t.componentsName[t.selectComponent]))]),a("h3",{staticClass:"headline mb-0"},[t._v(t._s(t.name))]),a("div",[t._v(t._s(t.email))])])])],1):t._e(),t.selectComponent?a(t.selectComponent,{tag:"component"}):t._e()],1)],1)],1)],1)}),s=[],r=a("cebc"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{id:"lead"}},[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[!t.newLead&&t.leads.length>0?a("v-select",{attrs:{items:t.leads,"item-text":"FULL_NAME","item-value":"ID",label:"Выберите лида","single-line":""},on:{change:t.getLead},model:{value:t.formData.lead,callback:function(e){t.$set(t.formData,"lead",e)},expression:"formData.lead"}}):t._e(),t.leads.length>0?a("v-switch",{attrs:{label:"Создать новый контакт"},model:{value:t.newLead,callback:function(e){t.newLead=e},expression:"newLead"}}):t._e(),a("v-text-field",{attrs:{rules:t.nameRules,label:"Имя",required:""},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}}),a("v-text-field",{attrs:{rules:t.lastnameRules,label:"Фамилия",required:""},model:{value:t.formData.lastname,callback:function(e){t.$set(t.formData,"lastname",e)},expression:"formData.lastname"}}),a("v-text-field",{attrs:{mask:t.phoneMask,label:"Телефон",required:""},model:{value:t.formData.phone,callback:function(e){t.$set(t.formData,"phone",e)},expression:"formData.phone"}}),a("v-autocomplete",{attrs:{items:t.managers,chips:"",color:"blue-grey lighten-2",label:"Менеджер","item-text":"FULL_NAME","item-value":"ID"},on:{keyup:t.searchManager},scopedSlots:t._u([{key:"selection",fn:function(e){return[a("v-chip",{staticClass:"chip--select-multi",attrs:{selected:e.selected,close:""},on:{input:function(e){t.formData.responsible=null}}},[a("v-avatar",[a("img",{attrs:{src:e.item.PERSONAL_PHOTO}})]),t._v("\n                    "+t._s(e.item.FULL_NAME)+"\n                ")],1)]}},{key:"item",fn:function(e){return["object"!==typeof e.item?[a("v-list-tile-content",{domProps:{textContent:t._s(e.item)}})]:[a("v-list-tile-avatar",[a("img",{attrs:{src:e.item.PERSONAL_PHOTO}})]),a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:t._s(e.item.FULL_NAME)}}),a("v-list-tile-sub-title",{domProps:{innerHTML:t._s(e.item.PERSONAL_PROFESSION)}})],1)]]}}]),model:{value:t.formData.responsible,callback:function(e){t.$set(t.formData,"responsible",e)},expression:"formData.responsible"}}),a("v-btn",{attrs:{disabled:!t.valid,color:"success"},on:{click:t.validate}},[t._v("\n            Отправить в CRM\n        ")])],1)],1)},c=[],u=(a("96cf"),a("3b8d")),m=a("2f62"),p=a("b012"),d=a.n(p),f={name:"Lead",computed:Object(r["a"])({},Object(m["b"])(["managers","loading","leads","baseUrl","email"])),data:function(){return{newLead:!1,formData:{lead:null,name:"",lastname:"",phone:"",responsible:null},phoneMask:"phone",userAccess:!1,valid:!0,nameRules:[function(t){return!!t||"Имя обязательно"}],lastnameRules:[function(t){return!!t||"Фамилия обязательна"}]}},methods:{validate:function(){this.$refs.form.validate()&&(this.snackbar=!0,this.sendForm())},getLead:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(e){var a,n=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.formData.lead=e,a={id:this.formData.lead},t.next=4,this.axios.get(this.baseUrl+"/crm.lead.get.json",{params:a}).then(function(t){var e=t.data.result;console.log(e),n.formData.name=e.NAME,n.formData.lastname=e.LAST_NAME,e.PHONE.map(function(t){"WORK"===t.VALUE_TYPE&&(n.formData.phone=t.VALUE)}),n.formData.responsible=e.ASSIGNED_BY_ID});case 4:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),sendForm:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(){var e,a,n=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e="crm.lead.add.json",a={fields:{TITLE:this.formData.name+" "+this.formData.lastname,NAME:this.formData.name,LAST_NAME:this.formData.lastname,EMAIL:[{VALUE_TYPE:"WORK",VALUE:this.email}],PHONE:[{VALUE_TYPE:"WORK",VALUE:this.formData.phone}],ASSIGNED_BY_ID:this.formData.responsible}},!1===this.newLead&&(e="crm.lead.update.json",a["ID"]=this.formData.lead),t.next=5,this.axios.post(this.baseUrl+"/"+e,a).then(function(t){var e=t.data.result;!1!==n.newLead&&n.getLead(e.result)});case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),searchManager:d()(function(t){var e=t.target.value;if(e.length>4){var a={query:e};this.$store.dispatch("loadManagers",a)}},500)}},v=f,h=a("2877"),b=a("6544"),g=a.n(b),_=a("7496"),D=a("c6a6"),L=a("8212"),y=a("8336"),k=a("cc20"),x=a("4bd4"),A=a("c954"),C=a("5d23"),T=a("b56d"),E=a("b73d"),S=a("2677"),V=Object(h["a"])(v,l,c,!1,null,null,null);V.options.__file="lead.vue";var O=V.exports;g()(V,{VApp:_["a"],VAutocomplete:D["a"],VAvatar:L["a"],VBtn:y["a"],VChip:k["a"],VForm:x["a"],VListTileAvatar:A["a"],VListTileContent:C["a"],VListTileSubTitle:C["b"],VListTileTitle:C["c"],VSelect:T["a"],VSwitch:E["a"],VTextField:S["a"]});var M=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{id:"contact"}},[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[!t.newContact&&t.contacts.length>0?a("v-select",{attrs:{items:t.contacts,"item-text":"FULL_NAME","item-value":"ID",label:"Выберите контакт","single-line":""},on:{change:t.getContact},model:{value:t.formData.contact,callback:function(e){t.$set(t.formData,"contact",e)},expression:"formData.contact"}}):t._e(),t.contacts.length>0?a("v-switch",{attrs:{label:"Создать новый контакт"},model:{value:t.newContact,callback:function(e){t.newContact=e},expression:"newContact"}}):t._e(),a("v-text-field",{attrs:{rules:t.nameRules,label:"Имя",required:""},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}}),a("v-text-field",{attrs:{rules:t.lastnameRules,label:"Фамилия",required:""},model:{value:t.formData.lastname,callback:function(e){t.$set(t.formData,"lastname",e)},expression:"formData.lastname"}}),a("v-text-field",{attrs:{mask:t.phoneMask,label:"Телефон",required:""},model:{value:t.formData.phone,callback:function(e){t.$set(t.formData,"phone",e)},expression:"formData.phone"}}),a("v-autocomplete",{attrs:{items:t.companies,chips:"",color:"blue-grey lighten-2",label:"Компания","item-text":"TITLE","item-value":"ID"},on:{keyup:t.searchCompanies},scopedSlots:t._u([{key:"selection",fn:function(e){return[a("v-chip",{staticClass:"chip--select-multi",attrs:{selected:e.selected,close:""},on:{input:function(e){t.formData.company=null}}},[t._v("\n                    "+t._s(e.item.TITLE)+"\n                ")])]}},{key:"item",fn:function(e){return["object"!==typeof e.item?[a("v-list-tile-content",{domProps:{textContent:t._s(e.item)}})]:[a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:t._s(e.item.TITLE)}})],1)]]}}]),model:{value:t.formData.company,callback:function(e){t.$set(t.formData,"company",e)},expression:"formData.company"}}),a("v-autocomplete",{attrs:{items:t.managers,chips:"",color:"blue-grey lighten-2",label:"Менеджер","item-text":"FULL_NAME","item-value":"ID"},on:{keyup:t.searchManager},scopedSlots:t._u([{key:"selection",fn:function(e){return[a("v-chip",{staticClass:"chip--select-multi",attrs:{selected:e.selected,close:""},on:{input:function(e){t.formData.responsible=null}}},[a("v-avatar",[a("img",{attrs:{src:e.item.PERSONAL_PHOTO}})]),t._v("\n                    "+t._s(e.item.FULL_NAME)+"\n                ")],1)]}},{key:"item",fn:function(e){return["object"!==typeof e.item?[a("v-list-tile-content",{domProps:{textContent:t._s(e.item)}})]:[a("v-list-tile-avatar",[a("img",{attrs:{src:e.item.PERSONAL_PHOTO}})]),a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:t._s(e.item.FULL_NAME)}}),a("v-list-tile-sub-title",{domProps:{innerHTML:t._s(e.item.PERSONAL_PROFESSION)}})],1)]]}}]),model:{value:t.formData.responsible,callback:function(e){t.$set(t.formData,"responsible",e)},expression:"formData.responsible"}}),a("v-btn",{attrs:{disabled:!t.valid,color:"success"},on:{click:t.validate}},[t._v("\n            Отправить в CRM\n        ")])],1)],1)},I=[],N={name:"Contact",computed:Object(r["a"])({},Object(m["b"])(["managers","baseUrl","loading","email","companies","contacts"])),data:function(){return{newContact:!1,formData:{name:"",lastname:"",phone:"",company:null,contact:null,responsible:null},phoneMask:"phone",userAccess:!1,valid:!0,nameRules:[function(t){return!!t||"Имя обязательно"}],lastnameRules:[function(t){return!!t||"Фамилия обязательна"}]}},methods:{validate:function(){this.$refs.form.validate()&&(this.snackbar=!0,this.sendForm())},searchCompanies:d()(function(t){var e=t.target.value;if(e.length>4){var a={query:e};this.$store.dispatch("loadCompanies",a)}},500),searchManager:d()(function(t){var e=t.target.value;if(e.length>4){var a={query:e};this.$store.dispatch("loadManagers",a)}},500),getContact:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(e){var a,n=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.formData.contact=e,a={id:this.formData.contact},t.next=4,this.axios.get(this.baseUrl+"/crm.contact.get.json",{params:a}).then(function(t){var e=t.data.result;n.formData.name=e.NAME,n.formData.lastname=e.LAST_NAME,n.formData.phone=e.PHONE;var a={id:e.COMPANY_ID};n.$store.dispatch("loadCompanies",a),n.formData.company=e.COMPANY_ID,n.formData.responsible=e.ASSIGNED_BY_ID});case 4:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),sendForm:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(){var e,a,n=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e="crm.contact.add.json",a={fields:{NAME:this.formData.name,LAST_NAME:this.formData.lastname,EMAIL:[{VALUE_TYPE:"WORK",VALUE:this.email}],PHONE:[{VALUE_TYPE:"WORK",VALUE:this.formData.phone}],COMPANY_IDS:[this.formData.company],ASSIGNED_BY_ID:this.formData.responsible}},!1===this.newContact&&(e="crm.contact.update.json",a["ID"]=this.formData.contact),t.next=5,this.axios.post(this.baseUrl+"/"+e,a).then(function(t){var e=t.data.result;!1!==n.newContact&&n.getContact(e.result)});case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()}},P=N,w=Object(h["a"])(P,M,I,!1,null,null,null);w.options.__file="contact.vue";var U=w.exports;g()(w,{VApp:_["a"],VAutocomplete:D["a"],VAvatar:L["a"],VBtn:y["a"],VChip:k["a"],VForm:x["a"],VListTileAvatar:A["a"],VListTileContent:C["a"],VListTileSubTitle:C["b"],VListTileTitle:C["c"],VSelect:T["a"],VSwitch:E["a"],VTextField:S["a"]});var R=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{id:"company"}},[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[!t.newCompany&&t.companies.length>0?a("v-select",{attrs:{items:t.companies,"item-text":"TITLE","item-value":"ID",label:"Выберите компанию","single-line":""},on:{change:t.getCompany},model:{value:t.formData.company,callback:function(e){t.$set(t.formData,"company",e)},expression:"formData.company"}}):t._e(),t.companies.length>0?a("v-switch",{attrs:{label:"Создать новую компанию"},model:{value:t.newCompany,callback:function(e){t.newCompany=e},expression:"newCompany"}}):t._e(),a("v-text-field",{attrs:{rules:t.titleRules,label:"Название",required:""},model:{value:t.formData.title,callback:function(e){t.$set(t.formData,"title",e)},expression:"formData.title"}}),a("v-text-field",{attrs:{mask:t.phoneMask,label:"Телефон",required:""},model:{value:t.formData.phone,callback:function(e){t.$set(t.formData,"phone",e)},expression:"formData.phone"}}),a("v-autocomplete",{attrs:{items:t.managers,chips:"",color:"blue-grey lighten-2",label:"Менеджер","item-text":"FULL_NAME","item-value":"ID"},on:{keyup:t.searchManager},scopedSlots:t._u([{key:"selection",fn:function(e){return[a("v-chip",{staticClass:"chip--select-multi",attrs:{selected:e.selected,close:""},on:{input:function(e){t.formData.responsible=null}}},[a("v-avatar",[a("img",{attrs:{src:e.item.PERSONAL_PHOTO}})]),t._v("\n                    "+t._s(e.item.FULL_NAME)+"\n                ")],1)]}},{key:"item",fn:function(e){return["object"!==typeof e.item?[a("v-list-tile-content",{domProps:{textContent:t._s(e.item)}})]:[a("v-list-tile-avatar",[a("img",{attrs:{src:e.item.PERSONAL_PHOTO}})]),a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:t._s(e.item.FULL_NAME)}}),a("v-list-tile-sub-title",{domProps:{innerHTML:t._s(e.item.PERSONAL_PROFESSION)}})],1)]]}}]),model:{value:t.formData.responsible,callback:function(e){t.$set(t.formData,"responsible",e)},expression:"formData.responsible"}}),a("v-btn",{attrs:{disabled:!t.valid,color:"success"},on:{click:t.validate}},[t._v("\n            Отправить в CRM\n        ")])],1)],1)},j=[],$={name:"Company",computed:Object(r["a"])({},Object(m["b"])(["managers","loading","companies","baseUrl"])),data:function(){return{newCompany:!1,formData:{title:"",phone:"",company:null,responsible:null},phoneMask:"phone",userAccess:!1,valid:!0,titleRules:[function(t){return!!t||"Название обязательно"}]}},methods:{validate:function(){this.$refs.form.validate()&&(this.snackbar=!0,this.sendForm())},searchManager:d()(function(t){var e=t.target.value;if(e.length>4){var a={query:e};this.$store.dispatch("loadManagers",a)}},500),getCompany:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(e){var a,n=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.formData.contact=e,a={id:this.formData.contact},t.next=4,this.axios.get(this.baseUrl+"/crm.company.get.json",{params:a}).then(function(t){var e=t.data.result;n.formData.title=e.TITLE,n.formData.phone=e.PHONE,n.formData.responsible=e.ASSIGNED_BY_ID});case 4:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),sendForm:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(){var e,a,n=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e="crm.company.add.json",a={fields:{TITLE:this.formData.title,EMAIL:[{VALUE_TYPE:"WORK",VALUE:this.email}],PHONE:[{VALUE_TYPE:"WORK",VALUE:this.formData.phone}],ASSIGNED_BY_ID:this.formData.responsible}},!1===this.newCompany&&(e="crm.company.update.json",a["ID"]=this.formData.contact),t.next=5,this.axios.post(this.baseUrl+"/"+e,a).then(function(t){var e=t.data.result;!1!==n.newCompany&&n.getCompany(e.result)});case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()}},F=$,q=Object(h["a"])(F,R,j,!1,null,null,null);q.options.__file="company.vue";var H=q.exports;g()(q,{VApp:_["a"],VAutocomplete:D["a"],VAvatar:L["a"],VBtn:y["a"],VChip:k["a"],VForm:x["a"],VListTileAvatar:A["a"],VListTileContent:C["a"],VListTileSubTitle:C["b"],VListTileTitle:C["c"],VSelect:T["a"],VSwitch:E["a"],VTextField:S["a"]});var B=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{id:"deal"}},[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-text-field",{attrs:{rules:t.titleRules,label:"Название",required:""},model:{value:t.formData.title,callback:function(e){t.$set(t.formData,"title",e)},expression:"formData.title"}}),a("v-autocomplete",{attrs:{items:t.companies,chips:"",color:"blue-grey lighten-2",label:"Компания","item-text":"TITLE","item-value":"ID"},on:{input:t.setCompany,keyup:t.searchCompanies},scopedSlots:t._u([{key:"selection",fn:function(e){return[a("v-chip",{staticClass:"chip--select-multi",attrs:{selected:e.selected,close:""},on:{input:function(e){t.formData.company=null}}},[t._v("\n                    "+t._s(e.item.TITLE)+"\n                ")])]}},{key:"item",fn:function(e){return["object"!==typeof e.item?[a("v-list-tile-content",{domProps:{textContent:t._s(e.item)}})]:[a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:t._s(e.item.TITLE)}})],1)]]}}]),model:{value:t.formData.company,callback:function(e){t.$set(t.formData,"company",e)},expression:"formData.company"}}),a("v-autocomplete",{attrs:{items:t.contacts,chips:"",color:"blue-grey lighten-2",label:"Контакт","item-text":"FULL_NAME","item-value":"ID"},on:{input:t.setContact,keyup:t.searchContact},scopedSlots:t._u([{key:"selection",fn:function(e){return[a("v-chip",{staticClass:"chip--select-multi",attrs:{selected:e.selected,close:""},on:{input:function(e){t.contact=null}}},[t._v("\n                    "+t._s(e.item.FULL_NAME)+"\n                ")])]}},{key:"item",fn:function(e){return["object"!==typeof e.item?[a("v-list-tile-content",{domProps:{textContent:t._s(e.item)}})]:[a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:t._s(e.item.FULL_NAME)}})],1)]]}}]),model:{value:t.formData.contact,callback:function(e){t.$set(t.formData,"contact",e)},expression:"formData.contact"}}),a("v-autocomplete",{attrs:{items:t.managers,chips:"",color:"blue-grey lighten-2",label:"Менеджер","item-text":"FULL_NAME","item-value":"ID"},on:{keyup:t.searchManager},scopedSlots:t._u([{key:"selection",fn:function(e){return[a("v-chip",{staticClass:"chip--select-multi",attrs:{selected:e.selected,close:""},on:{input:function(e){t.formData.responsible=null}}},[a("v-avatar",[a("img",{attrs:{src:e.item.PERSONAL_PHOTO}})]),t._v("\n                    "+t._s(e.item.FULL_NAME)+"\n                ")],1)]}},{key:"item",fn:function(e){return["object"!==typeof e.item?[a("v-list-tile-content",{domProps:{textContent:t._s(e.item)}})]:[a("v-list-tile-avatar",[a("img",{attrs:{src:e.item.PERSONAL_PHOTO}})]),a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:t._s(e.item.FULL_NAME)}}),a("v-list-tile-sub-title",{domProps:{innerHTML:t._s(e.item.PERSONAL_PROFESSION)}})],1)]]}}]),model:{value:t.formData.responsible,callback:function(e){t.$set(t.formData,"responsible",e)},expression:"formData.responsible"}}),a("v-textarea",{attrs:{solo:"",label:"Комментарий"},model:{value:t.formData.comments,callback:function(e){t.$set(t.formData,"comments",e)},expression:"formData.comments"}}),a("v-btn",{attrs:{disabled:!t.valid,color:"success"},on:{click:t.validate}},[t._v("\n            Отправить в CRM\n        ")])],1)],1)},Y=[],z={name:"Deal",computed:Object(r["a"])({},Object(m["b"])(["managers","loading","contacts","companies"])),data:function(){return{formData:{title:"",company:null,contact:null,responsible:null,type:null,direction:null,comments:null},phoneMask:"phone",userAccess:!1,valid:!0,titleRules:[function(t){return!!t||"Название обязательно"}]}},methods:{validate:function(){this.$refs.form.validate()&&(this.snackbar=!0,this.sendForm())},setContact:function(){var t=this,e=this.contacts.filter(function(e){return e.ID===t.formData.contact}).pop(),a={id:e["COMPANY_ID"]};this.$store.dispatch("loadCompanies",a)},setCompany:function(){var t={companyId:this.formData.company};this.$store.dispatch("loadContacts",t)},searchContact:d()(function(t){var e=t.target.value;if(e.length>4){var a={query:e};this.$store.dispatch("loadContacts",a)}},500),searchCompanies:d()(function(t){var e=t.target.value;if(e.length>4){var a={query:e};this.$store.dispatch("loadCompanies",a)}},500),searchManager:d()(function(t){var e=t.target.value;if(e.length>4){var a={query:e};this.$store.dispatch("loadManagers",a)}},500),sendForm:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(){var e,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e="crm.deal.add.json",a={fields:{TITLE:this.formData.title,EMAIL:[{VALUE_TYPE:"WORK",VALUE:this.email}],COMPANY_ID:this.formData.company,CONTACT_IDS:[this.formData.contact],ASSIGNED_BY_ID:this.formData.responsible,COMMENTS:this.formData.comments}},t.next=4,this.axios.post(this.baseUrl+"/"+e,a).then(function(t){t.data.result});case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()}},K=z,G=a("a844"),W=Object(h["a"])(K,B,Y,!1,null,null,null);W.options.__file="deal.vue";var Q=W.exports;g()(W,{VApp:_["a"],VAutocomplete:D["a"],VAvatar:L["a"],VBtn:y["a"],VChip:k["a"],VForm:x["a"],VListTileAvatar:A["a"],VListTileContent:C["a"],VListTileSubTitle:C["b"],VListTileTitle:C["c"],VTextField:S["a"],VTextarea:G["a"]});var J=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{id:"quote"}},[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-text-field",{attrs:{rules:t.titleRules,label:"Название",required:""},model:{value:t.formData.title,callback:function(e){t.$set(t.formData,"title",e)},expression:"formData.title"}}),a("v-autocomplete",{attrs:{disabled:t.formData.contact,items:t.companies,chips:"",color:"blue-grey lighten-2",label:"Компания","item-text":"TITLE","item-value":"ID"},on:{input:t.setCompany,keyup:t.searchCompanies},scopedSlots:t._u([{key:"selection",fn:function(e){return[a("v-chip",{staticClass:"chip--select-multi",attrs:{selected:e.selected,close:""},on:{input:function(e){t.formData.company=null}}},[t._v("\n                    "+t._s(e.item.TITLE)+"\n                ")])]}},{key:"item",fn:function(e){return["object"!==typeof e.item?[a("v-list-tile-content",{domProps:{textContent:t._s(e.item)}})]:[a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:t._s(e.item.TITLE)}})],1)]]}}]),model:{value:t.formData.company,callback:function(e){t.$set(t.formData,"company",e)},expression:"formData.company"}}),a("v-autocomplete",{attrs:{disabled:t.formData.company,items:t.contacts,chips:"",color:"blue-grey lighten-2",label:"Контакт","item-text":"FULL_NAME","item-value":"ID"},on:{input:t.setContact,keyup:t.searchContact},scopedSlots:t._u([{key:"selection",fn:function(e){return[a("v-chip",{staticClass:"chip--select-multi",attrs:{selected:e.selected,close:""},on:{input:function(e){t.formData.contact=null}}},[t._v("\n                    "+t._s(e.item.FULL_NAME)+"\n                ")])]}},{key:"item",fn:function(e){return["object"!==typeof e.item?[a("v-list-tile-content",{domProps:{textContent:t._s(e.item)}})]:[a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:t._s(e.item.FULL_NAME)}})],1)]]}}]),model:{value:t.formData.contact,callback:function(e){t.$set(t.formData,"contact",e)},expression:"formData.contact"}}),a("v-autocomplete",{attrs:{items:t.managers,chips:"",color:"blue-grey lighten-2",label:"Менеджер","item-text":"FULL_NAME","item-value":"ID"},on:{keyup:t.searchManager},scopedSlots:t._u([{key:"selection",fn:function(e){return[a("v-chip",{staticClass:"chip--select-multi",attrs:{selected:e.selected,close:""},on:{input:function(e){t.formData.responsible=null}}},[a("v-avatar",[a("img",{attrs:{src:e.item.PERSONAL_PHOTO}})]),t._v("\n                    "+t._s(e.item.FULL_NAME)+"\n                ")],1)]}},{key:"item",fn:function(e){return["object"!==typeof e.item?[a("v-list-tile-content",{domProps:{textContent:t._s(e.item)}})]:[a("v-list-tile-avatar",[a("img",{attrs:{src:e.item.PERSONAL_PHOTO}})]),a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:t._s(e.item.FULL_NAME)}}),a("v-list-tile-sub-title",{domProps:{innerHTML:t._s(e.item.PERSONAL_PROFESSION)}})],1)]]}}]),model:{value:t.formData.responsible,callback:function(e){t.$set(t.formData,"responsible",e)},expression:"formData.responsible"}}),a("v-btn",{attrs:{disabled:!t.valid,color:"success"},on:{click:t.validate}},[t._v("\n            Отправить в CRM\n        ")]),a("v-btn",{attrs:{color:"error"},on:{click:t.reset}},[t._v("\n            Очистить\n        ")])],1)],1)},X=[],Z={name:"Quote",computed:Object(r["a"])({},Object(m["b"])(["managers","loading","contacts","companies"])),data:function(){return{formData:{title:"",company:null,contact:null,responsible:null,type:null,direction:null},userAccess:!1,valid:!0,titleRules:[function(t){return!!t||"Название обязательно"}]}},methods:{validate:function(){this.$refs.form.validate()&&(this.snackbar=!0)},reset:function(){this.$store.dispatch("clearData"),this.$refs.form.reset()},setContact:function(){this.formData.company=null},setCompany:function(){this.formData.contact=null},searchContact:d()(function(t){var e=t.target.value;if(e.length>4){var a={query:e};this.$store.dispatch("loadContacts",a)}},500),searchCompanies:d()(function(t){var e=t.target.value;if(e.length>4){var a={query:e};this.$store.dispatch("loadCompanies",a)}},500),searchManager:d()(function(t){var e=t.target.value;if(e.length>4){var a={query:e};this.$store.dispatch("loadManagers",a)}},500)}},tt=Z,et=Object(h["a"])(tt,J,X,!1,null,null,null);et.options.__file="quote.vue";var at=et.exports;g()(et,{VApp:_["a"],VAutocomplete:D["a"],VAvatar:L["a"],VBtn:y["a"],VChip:k["a"],VForm:x["a"],VListTileAvatar:A["a"],VListTileContent:C["a"],VListTileSubTitle:C["b"],VListTileTitle:C["c"],VTextField:S["a"]});var nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{id:"task"}},[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-text-field",{attrs:{rules:t.titleRules,label:"Название",required:""},model:{value:t.formData.title,callback:function(e){t.$set(t.formData,"title",e)},expression:"formData.title"}}),a("v-textarea",{attrs:{solo:"",label:"Описание задачи"},model:{value:t.formData.description,callback:function(e){t.$set(t.formData,"description",e)},expression:"formData.description"}}),a("v-dialog",{ref:"dialog",attrs:{"return-value":t.date,persistent:"",lazy:"","full-width":"",width:"290px"},on:{"update:returnValue":function(e){t.date=e}},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[a("v-text-field",{attrs:{slot:"activator",label:"Крайний срок","prepend-icon":"event",readonly:""},slot:"activator",model:{value:t.formData.deadline,callback:function(e){t.$set(t.formData,"deadline",e)},expression:"formData.deadline"}}),a("v-date-picker",{attrs:{scrollable:"",locale:"ru-RU"},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}},[a("v-spacer"),a("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(e){t.modal=!1}}},[t._v("Отмена")]),a("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(e){t.$refs.dialog.save(t.date)}}},[t._v("Ок")])],1)],1),a("v-autocomplete",{attrs:{items:t.companies,chips:"",color:"blue-grey lighten-2",label:"Компания","item-text":"TITLE","item-value":"ID"},on:{keyup:t.searchCompanies},scopedSlots:t._u([{key:"selection",fn:function(e){return[a("v-chip",{staticClass:"chip--select-multi",attrs:{selected:e.selected,close:""},on:{input:function(e){t.formData.company=null}}},[t._v("\n                    "+t._s(e.item.TITLE)+"\n                ")])]}},{key:"item",fn:function(e){return["object"!==typeof e.item?[a("v-list-tile-content",{domProps:{textContent:t._s(e.item)}})]:[a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:t._s(e.item.TITLE)}})],1)]]}}]),model:{value:t.formData.company,callback:function(e){t.$set(t.formData,"company",e)},expression:"formData.company"}}),a("v-autocomplete",{attrs:{items:t.contacts,chips:"",color:"blue-grey lighten-2",label:"Контакт","item-text":"FULL_NAME","item-value":"ID"},on:{keyup:t.searchContact},scopedSlots:t._u([{key:"selection",fn:function(e){return[a("v-chip",{staticClass:"chip--select-multi",attrs:{selected:e.selected,close:""},on:{input:function(e){t.formData.contact=null}}},[t._v("\n                    "+t._s(e.item.FULL_NAME)+"\n                ")])]}},{key:"item",fn:function(e){return["object"!==typeof e.item?[a("v-list-tile-content",{domProps:{textContent:t._s(e.item)}})]:[a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:t._s(e.item.FULL_NAME)}})],1)]]}}]),model:{value:t.formData.contact,callback:function(e){t.$set(t.formData,"contact",e)},expression:"formData.contact"}}),a("v-autocomplete",{attrs:{items:t.managers,chips:"",color:"blue-grey lighten-2",label:"Менеджер","item-text":"FULL_NAME","item-value":"ID"},on:{keyup:t.searchManager},scopedSlots:t._u([{key:"selection",fn:function(e){return[a("v-chip",{staticClass:"chip--select-multi",attrs:{selected:e.selected,close:""},on:{input:function(e){t.formData.responsible=null}}},[a("v-avatar",[a("img",{attrs:{src:e.item.PERSONAL_PHOTO}})]),t._v("\n                    "+t._s(e.item.FULL_NAME)+"\n                ")],1)]}},{key:"item",fn:function(e){return["object"!==typeof e.item?[a("v-list-tile-content",{domProps:{textContent:t._s(e.item)}})]:[a("v-list-tile-avatar",[a("img",{attrs:{src:e.item.PERSONAL_PHOTO}})]),a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:t._s(e.item.FULL_NAME)}}),a("v-list-tile-sub-title",{domProps:{innerHTML:t._s(e.item.PERSONAL_PROFESSION)}})],1)]]}}]),model:{value:t.formData.responsible,callback:function(e){t.$set(t.formData,"responsible",e)},expression:"formData.responsible"}}),a("v-btn",{attrs:{disabled:!t.valid,color:"success"},on:{click:t.validate}},[t._v("\n            Отправить в CRM\n        ")])],1)],1)},ot=[],it=(a("28a5"),a("768b")),st={name:"Task",computed:Object(r["a"])({},Object(m["b"])(["managers","loading","contacts","companies","baseUrl"])),data:function(){return{date:(new Date).toISOString().substr(0,10),modal:!1,formData:{title:"",company:null,contact:null,responsible:null,description:"",deadline:this.formatDate((new Date).toISOString().substr(0,10))},userAccess:!1,valid:!0,titleRules:[function(t){return!!t||"Название обязательно"}]}},watch:{date:function(t){this.formData.deadline=this.formatDate(this.date)}},methods:{validate:function(){this.$refs.form.validate()&&(this.snackbar=!0,this.sendForm())},formatDate:function(t){if(!t)return null;var e=t.split("-"),a=Object(it["a"])(e,3),n=a[0],o=a[1],i=a[2];return"".concat(i,".").concat(o,".").concat(n)},searchManager:d()(function(t){var e=t.target.value;if(e.length>4){var a={query:e};this.$store.dispatch("loadManagers",a)}},500),searchContact:d()(function(t){var e=t.target.value;if(e.length>4){var a={query:e};this.$store.dispatch("loadContacts",a)}},500),searchCompanies:d()(function(t){var e=t.target.value;if(e.length>4){var a={query:e};this.$store.dispatch("loadCompanies",a)}},500),sendForm:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(){var e,a,n=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e="task.item.add.json",a=[{TITLE:this.formData.title,DESCRIPTION:this.formData.description,DEADLINE:this.formData.deadline,UF_CRM_TASK:["C_"+this.formData.contact,"CO_"+this.formData.company],RESPONSIBLE_ID:this.formData.responsible}],t.next=4,this.axios.post(this.baseUrl+"/"+e,a).then(function(t){t.data.result;n.$refs.form.reset()});case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},created:function(){}},rt=st,lt=a("2e4b"),ct=a("169a"),ut=a("9910"),mt=Object(h["a"])(rt,nt,ot,!1,null,null,null);mt.options.__file="task.vue";var pt=mt.exports;g()(mt,{VApp:_["a"],VAutocomplete:D["a"],VAvatar:L["a"],VBtn:y["a"],VChip:k["a"],VDatePicker:lt["a"],VDialog:ct["a"],VForm:x["a"],VListTileAvatar:A["a"],VListTileContent:C["a"],VListTileSubTitle:C["b"],VListTileTitle:C["c"],VSpacer:ut["a"],VTextField:S["a"],VTextarea:G["a"]});var dt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{id:"settings"}},[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-text-field",{attrs:{rules:t.required,label:"Название",required:""},model:{value:t.baseUrl,callback:function(e){t.baseUrl=e},expression:"baseUrl"}}),a("v-text-field",{attrs:{rules:t.required,label:"Веб-хук",required:"",type:"password"},model:{value:t.hook,callback:function(e){t.hook=e},expression:"hook"}}),a("v-text-field",{attrs:{rules:t.required,label:"ID пользователя веб-хука",required:""},model:{value:t.userId,callback:function(e){t.userId=e},expression:"userId"}}),a("v-btn",{attrs:{disabled:!t.valid,color:"success"},on:{click:t.validate}},[t._v("\n            Сохранить\n        ")]),a("v-btn",{attrs:{color:"error"},on:{click:t.reset}},[t._v("\n            Очистить\n        ")])],1)],1)},ft=[],vt={name:"Settings",data:function(){return{valid:!0,userId:localStorage.userId,baseUrl:localStorage.baseUrl,hook:localStorage.hook,required:[function(t){return!!t||"Обязательно для заполнения"}]}},props:{source:String},methods:{onSubmit:function(t){t.preventDefault(),this.$refs.form.validate()&&(this.snackbar=!0,localStorage.hook=this.hook,localStorage.baseUrl=this.baseUrl,localStorage.userId=this.userId,this.$emit("login"))}}},ht=vt,bt=Object(h["a"])(ht,dt,ft,!1,null,null,null);bt.options.__file="settings.vue";var gt=bt.exports;g()(bt,{VApp:_["a"],VBtn:y["a"],VForm:x["a"],VTextField:S["a"]});var _t={name:"Base",components:{Lead:O,Contact:U,Company:H,Deal:Q,Quote:at,Task:pt,Settings:gt},computed:Object(r["a"])({},Object(m["b"])(["scope","loading","contacts","companies","leads","counter","email","name"])),data:function(){return{mini:!0,drawer:!0,selectComponent:null,crmAccess:!1,taskAccess:!1,componentsName:{Lead:"Лид",Contact:"Контакт",Company:"Компания",Deal:"Сделка",Quote:"Предложение",Task:"Задача",Setting:"Настройки"}}},methods:{changeComponent:function(t){this.selectComponent=t,this.mini=!0}},created:function(){var t=this;this.$store.dispatch("loadScope").then(function(){-1!==t.scope.indexOf("crm")&&(t.crmAccess=!0),-1!==t.scope.indexOf("task")&&(t.taskAccess=!0)})}},Dt=_t,Lt=(a("b269"),a("4ca6")),yt=a("b0af"),kt=a("12b2"),xt=a("a523"),At=a("0e8f"),Ct=a("132d"),Tt=a("a722"),Et=a("8860"),St=a("ba95"),Vt=a("40fe"),Ot=a("f774"),Mt=Object(h["a"])(Dt,i,s,!1,null,null,null);Mt.options.__file="base.vue";var It=Mt.exports;g()(Mt,{VApp:_["a"],VBadge:Lt["a"],VCard:yt["a"],VCardTitle:kt["a"],VContainer:xt["a"],VFlex:At["a"],VIcon:Ct["a"],VLayout:Tt["a"],VList:Et["a"],VListTile:St["a"],VListTileAction:Vt["a"],VListTileContent:C["a"],VListTileTitle:C["c"],VNavigationDrawer:Ot["a"]});var Nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{id:"inspire"}},[a("v-content",[a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-layout",{attrs:{"align-center":"","justify-center":""}},[a("v-flex",{attrs:{xs12:"",sm8:"",md4:""}},[a("v-card",{staticClass:"elevation-12"},[a("v-toolbar",{attrs:{dark:"",color:"primary"}},[a("v-toolbar-title",[t._v("Данные для подключения")])],1),a("v-card-text",[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-text-field",{attrs:{rules:t.required,"prepend-icon":"home",label:"Адрес портала",type:"text"},model:{value:t.baseUrl,callback:function(e){t.baseUrl=e},expression:"baseUrl"}}),a("v-text-field",{attrs:{rules:t.required,id:"password","prepend-icon":"info",label:"Входящий веб-хук",type:"password"},model:{value:t.hook,callback:function(e){t.hook=e},expression:"hook"}}),a("v-text-field",{attrs:{rules:t.required,id:"userId","prepend-icon":"account_circle",label:"ID пользователя, создавшего вебхук",type:"text"},model:{value:t.userId,callback:function(e){t.userId=e},expression:"userId"}})],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary"},on:{click:t.onSubmit}},[t._v("Сохранить")])],1)],1)],1)],1)],1)],1)],1)},Pt=[],wt={data:function(){return{valid:!0,userId:"",baseUrl:"",hook:"",required:[function(t){return!!t||"Обязательно для заполнения"}]}},props:{source:String},methods:{onSubmit:function(t){t.preventDefault(),this.$refs.form.validate()&&(this.snackbar=!0,localStorage.hook=this.hook,localStorage.baseUrl=this.baseUrl,localStorage.userId=this.userId,this.$emit("login"))}}},Ut=wt,Rt=a("99d9"),jt=a("549c"),$t=a("71d9"),Ft=a("2a7f"),qt=Object(h["a"])(Ut,Nt,Pt,!1,null,null,null);qt.options.__file="auth.vue";var Ht=qt.exports;g()(qt,{VApp:_["a"],VBtn:y["a"],VCard:yt["a"],VCardActions:Rt["a"],VCardText:Rt["b"],VContainer:xt["a"],VContent:jt["a"],VFlex:At["a"],VForm:x["a"],VLayout:Tt["a"],VSpacer:ut["a"],VTextField:S["a"],VToolbar:$t["a"],VToolbarTitle:Ft["a"]});var Bt={name:"App",components:{Auth:Ht,Base:It},data:function(){return{selectComponent:null}},mounted:function(){if("undefined"!=typeof localStorage.hook&&"undefined"!=typeof localStorage.baseUrl&&"undefined"!=typeof localStorage.userId){this.selectComponent="Base";var t=localStorage.baseUrl+"/rest/"+localStorage.userId+"/"+localStorage.hook;this.$store.dispatch("setBaseUrl",t)}else this.selectComponent="Auth"},methods:{login:function(){this.selectComponent="Base"},getData:function(){var t=this;chrome.storage.sync.get(["email"],function(e){t.$store.dispatch("setEmail",e.email)}),chrome.storage.sync.get(["name"],function(e){t.$store.dispatch("setName",e.name),t.$store.dispatch("init").then(function(){console.log("reload")})})}},created:function(){var t=this;this.getData(),chrome.runtime.onMessage.addListener(function(e){"update"===e.action&&t.getData()})}},Yt=Bt,zt=a("706c"),Kt=Object(h["a"])(Yt,n,o,!1,null,null,null);Kt.options.__file="App.vue";e["a"]=Kt.exports;g()(Kt,{VApp:_["a"],VContent:jt["a"],VToolbar:$t["a"],VToolbarSideIcon:zt["a"],VToolbarTitle:Ft["a"]})},"402c":function(t,e,a){"use strict";a("cadf"),a("551c"),a("097d");var n=a("2b0e"),o=a("bb71");a("da64");n["a"].use(o["a"],{iconfont:"md"})},"56d7":function(t,e,a){"use strict";a.r(e),function(t){a("cadf"),a("551c"),a("097d");var e=a("2b0e"),n=(a("402c"),a("3dfd")),o=a("bc3a"),i=a.n(o),s=a("a7fe"),r=a.n(s),l=a("c0d6");t.browser=a("9845"),e["a"].use(r.a,i.a),e["a"].config.productionTip=!1,new e["a"]({store:l["a"],render:function(t){return t(n["a"])}}).$mount("#app")}.call(this,a("c8ba"))},b269:function(t,e,a){"use strict";var n=a("02b4"),o=a.n(n);o.a},c0d6:function(t,e,a){"use strict";a("7f7f"),a("96cf");var n=a("3b8d"),o=(a("cadf"),a("551c"),a("097d"),a("2b0e")),i=a("2f62"),s=a("bc3a"),r=a.n(s),l=a("a7fe"),c=a.n(l);o["a"].use(c.a,r.a),o["a"].use(i["a"]);var u={email:"",name:"",leads:[],loading:!0,managers:[],baseUrl:"",scope:[],contacts:[],companies:[],counter:{leads:0,companies:0,contacts:0}},m={updateBaseUrl:function(t,e){t.baseUrl=e},updateScope:function(t,e){t.scope=e},updateManagers:function(t,e){t.managers=e},updateContacts:function(t,e){t.contacts=e},updateCompanies:function(t,e){t.companies=e},changeLoadingState:function(t,e){t.loading=e},clearData:function(t){t.contacts=[],t.companies=[]},updateEmail:function(t,e){t.email=e},updateName:function(t,e){t.name=e},updateLeads:function(t,e){t.leads=e},updateCounter:function(t,e){void 0!==e.leads&&(t.counter.leads=e.leads),void 0!==e.contacts&&(t.counter.contacts=e.contacts),void 0!==e.companies&&(t.counter.companies=e.companies)}},p={clearData:function(t){var e=t.commit;e("clearData")},setBaseUrl:function(t,e){var a=t.commit;a("updateBaseUrl",e)},setEmail:function(t,e){var a=t.commit;a("updateEmail",e)},setName:function(t,e){var a=t.commit;a("updateName",e)},init:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e.commit("changeLoadingState",!0),a={select:["ID","NAME","LAST_NAME"],filter:{EMAIL:u.email}},t.next=4,r.a.post(u.baseUrl+"/crm.contact.list.json",a).then(function(t){e.commit("updateContacts",t.data.result),e.commit("updateCounter",{contacts:t.data.result.length})});case 4:return t.next=6,r.a.post(u.baseUrl+"/crm.company.list.json",a).then(function(t){e.commit("updateCompanies",t.data.result),e.commit("updateCounter",{companies:t.data.result.length})});case 6:return t.next=8,r.a.post(u.baseUrl+"/crm.lead.list.json",a).then(function(t){e.commit("updateLeads",t.data.result),e.commit("updateCounter",{leads:t.data.result.length})});case 8:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),loadScope:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(u.scope.length){t.next=4;break}return e.commit("changeLoadingState",!0),t.next=4,r.a.get(u.baseUrl+"/scope/").then(function(t){e.commit("updateScope",t.data.result),e.commit("changeLoadingState",!1)});case 4:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),loadManagers:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e,a){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e.commit("changeLoadingState",!0),n={ACTIVE:"Y",FIND:a.query},t.next=4,r.a.get(u.baseUrl+"/user.search.json",{params:n}).then(function(t){e.commit("updateManagers",t.data.result),e.commit("changeLoadingState",!1)});case 4:case"end":return t.stop()}},t,this)}));function e(e,a){return t.apply(this,arguments)}return e}(),loadContacts:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e,a){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e.commit("changeLoadingState",!0),n={select:["ID","NAME","LAST_NAME","COMPANY_ID"],filter:{"%LAST_NAME":a.query}},void 0!==a.companyId&&(n.filter["COMPANY_ID"]=a.companyId),t.next=5,r.a.post(u.baseUrl+"/crm.contact.list.json",n).then(function(t){e.commit("updateContacts",t.data.result),e.commit("changeLoadingState",!1)});case 5:case"end":return t.stop()}},t,this)}));function e(e,a){return t.apply(this,arguments)}return e}(),loadCompanies:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e,a){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e.commit("changeLoadingState",!0),n={select:["TITLE","ID"],filter:{"%TITLE":a.query}},void 0!==a.id&&(n.filter["ID"]=a.id),t.next=5,r.a.post(u.baseUrl+"/crm.company.list.json",n).then(function(t){e.commit("updateCompanies",t.data.result),e.commit("changeLoadingState",!1)});case 5:case"end":return t.stop()}},t,this)}));function e(e,a){return t.apply(this,arguments)}return e}()},d={baseUrl:function(t){return t.baseUrl},scope:function(t){return t.scope},managers:function(t){return t.managers.map(function(t){return t.FULL_NAME=t.NAME+" "+t.LAST_NAME,t})},contacts:function(t){return t.contacts.map(function(t){return t.FULL_NAME=t.NAME+" "+t.LAST_NAME,t})},companies:function(t){return t.companies},leads:function(t){return t.leads.map(function(t){return t.FULL_NAME=t.NAME+" "+t.LAST_NAME,t})},email:function(t){return t.email},name:function(t){return t.name},counter:function(t){return t.counter}};e["a"]=new i["a"].Store({state:u,getters:d,actions:p,mutations:m})}});
//# sourceMappingURL=app.fab64ae9.js.map